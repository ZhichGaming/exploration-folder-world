<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">  
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        .root {
            width: 100vw;
            height: 100vh;
        }

        .events-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
            /* display: flex; */
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fade-in ease-out 0.5s;
        }

        @keyframes fade-in {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .event {
            width: 100%;
            height: 100%;
            position: absolute;
            display: flex;
            background-color: #313131;
            color: white;
            transition: all 0.5s ease-in-out;
            /* transform: translate(0); */
            /* opacity: 1; */
        }

        .event-displaced-left {
            transform: translateX(-100vw);
        }

        .event-displaced-right {
            transform: translateX(100vw);
        }

        .navigation-area {
            height: 100%;
            flex: 1 1 auto;
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 15px;
            font-family: "Playfair Display", serif;
            font-size: 20px;
            font-weight: 700;
        }

        .left-area {
            text-align: left;
        }

        .right-area {
            text-align: right;
            justify-content: flex-end;
        }

        .background-image {
            width: 100%;
            height: 100%;
            opacity: 0.2;
            position: absolute;
            pointer-events: none;
            /* z-index: -1; */
        }

        .info-area {
            height: 100%;
            width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-family: 'Space Grotesk', sans-serif;
        }

        .year {
            font-family: "Playfair Display", serif;
            font-size: 80px;
            font-weight: 700;
            margin: 10px;
        }

        .description {
            opacity: 0.8;
            font-weight: 100;
            font-size: 15px;
        }

        .toc {
            position: fixed;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: end;
            margin-bottom: 20px;
        }

        .toc-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid white;
            /* background-color: white; */
            cursor: pointer;
            /* margin: 10px; */
            transition: background-color 0.2s;
        }

        .toc-circle:hover {
            background-color: white;
        }

        .toc-circle-selected {
            background-color: white;
        }
    </style>
</head>
<body>
    <div class="root">
        <div id="events-container" class="events-container">
            <div id="active-event" class="event">
                <img class="background-image" src="https://picsum.photos/1600/900">
                <div id="left-area" class="navigation-area left-area" onclick="clickLeft()"></div>
                <div class="info-area">                    
                    <p class="title">HEY, THIS IS A TITLE</p>
                    <p class="year">1600</p>
                    <p class="description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor malesuada neque, ut aliquam neque. Morbi pretium elementum nisi at interdum. Ut dignissim blandit bibendum. Phasellus commodo mi ut ante scelerisque egestas. Sed non nulla ac nunc dignissim semper non sit amet magna. Curabitur vitae nibh eget ipsum feugiat feugiat non in est. Donec at ex suscipit velit congue faucibus egestas nec lectus. Cras in pretium nibh. Cras tellus mi, hendrerit sit amet tincidunt sit amet, gravida nec dui. Nunc eget orci non ex aliquam elementum nec a turpis. Quisque vel aliquam sapien. Nam in rutrum erat, nec laoreet est. Duis congue lorem sit amet interdum viverra. In posuere elementum nisl eget viverra.</p>
                </div>
                <div id="right-area" class="navigation-area right-area" onclick="clickRight()"></div>
            </div>
        </div>
        <div id="toc" class="toc">

        </div>
    </div>
    <script>
        const events = [
            {
                date: new Date(1876, 0, 7),
                title: "Where it all started",
                description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor malesuada neque, ut aliquam neque. Morbi pretium elementum nisi at interdum. Ut dignissim blandit bibendum. Phasellus commodo mi ut ante scelerisque egestas. Sed non nulla ac nunc dignissim semper non sit amet magna. Curabitur vitae nibh eget ipsum feugiat feugiat non in est. Donec at ex suscipit velit congue faucibus egestas nec lectus. Cras in pretium nibh. Cras tellus mi, hendrerit sit amet tincidunt sit amet, gravida nec dui. Nunc eget orci non ex aliquam elementum nec a turpis. Quisque vel aliquam sapien. Nam in rutrum erat, nec laoreet est. Duis congue lorem sit amet interdum viverra. In posuere elementum nisl eget viverra.",
                backgroundURL: "https://picsum.photos/1600/900",
            },
            {
                date: new Date(1880, 1, 2),
                title: "Where it all started",
                description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor malesuada neque, ut aliquam neque. Morbi pretium elementum nisi at interdum. Ut dignissim blandit bibendum. Phasellus commodo mi ut ante scelerisque egestas. Sed non nulla ac nunc dignissim semper non sit amet magna. Curabitur vitae nibh eget ipsum feugiat feugiat non in est. Donec at ex suscipit velit congue faucibus egestas nec lectus. Cras in pretium nibh. Cras tellus mi, hendrerit sit amet tincidunt sit amet, gravida nec dui. Nunc eget orci non ex aliquam elementum nec a turpis. Quisque vel aliquam sapien. Nam in rutrum erat, nec laoreet est. Duis congue lorem sit amet interdum viverra. In posuere elementum nisl eget viverra.",
                backgroundURL: "https://picsum.photos/1600/900",
            }
        ]

        let activeEvent = document.getElementById("active-event");
        const eventsContainer = document.getElementById("events-container");

        let currentEventIndex = 0;

        function getNextEventIndex(by = 1) {
            const newIndex = currentEventIndex + by;
            return (newIndex < 0 ? newIndex + events.length : newIndex) % events.length;
        }

        function setEvent(eventIndex) {
            const event = events[eventIndex];

            const title = activeEvent.querySelector(".title");
            const year = activeEvent.querySelector(".year");
            const description = activeEvent.querySelector(".description");
            const backgroundImage = activeEvent.querySelector(".background-image");

            title.innerText = event.title;
            year.innerText = event.date.getFullYear();
            description.innerText = event.description;
            backgroundImage.src = event.backgroundURL;

            activeEvent.querySelector("#left-area").innerText = "< " + events[getNextEventIndex(-1)].date.getFullYear();
            activeEvent.querySelector("#right-area").innerText = events[getNextEventIndex()].date.getFullYear() + " >";

            if (document.getElementById("toc").children.length > 0) {
                document.getElementById("toc").children[currentEventIndex].classList.add("toc-circle-selected");

                document.getElementById("toc").children.forEach((tocItem, index) => {
                    if (index !== currentEventIndex) tocItem.classList.remove("toc-circle-selected");
                })
            }
        }

        function createTOC() {
            const toc = document.getElementById("toc");

            events.forEach((event, index) => {
                const tocItem = document.createElement("div");
                // tocItem.innerText = event.date.getFullYear();
                tocItem.classList.add("toc-circle")

                tocItem.addEventListener("click", () => {
                    if (index === currentEventIndex) return;

                    currentEventIndex = index;
                    const newEventElement = getClonedEvent();

                    eventsContainer.appendChild(newEventElement)

                    if (index < currentEventIndex) activeEvent.classList.add("event-displaced-right")
                    else if (index > currentEventIndex) activeEvent.classList.add("event-displaced-left")

                    changeActiveEvent(newEventElement);
                })

                toc.appendChild(tocItem);

                if (index !== events.length - 1) {
                    const separator = document.createElement("hr");
                    separator.style.width = "20px";
                    separator.style.border = "2px solid white";
                    toc.appendChild(separator);
                }
            })
        }

        createTOC();

        setEvent(0);

        function getClonedEvent() {
            const newEventElement = activeEvent.cloneNode(true);
            newEventElement.classList.add("no-opacity")
            return newEventElement;
        }

        function changeActiveEvent(newEventElement) {
            activeEvent.removeAttribute("id")

            const previousActiveEvent = activeEvent;
            activeEvent = document.getElementById("active-event")
            
            setEvent(currentEventIndex);

            newEventElement.classList.add("fade-in");

            previousActiveEvent.addEventListener("transitionend", () => {
                previousActiveEvent.remove();
            })
        }

        function clickLeft() {
            currentEventIndex = getNextEventIndex(-1);            
            const newEventElement = getClonedEvent();

            eventsContainer.appendChild(newEventElement)

            activeEvent.classList.add("event-displaced-right")
            changeActiveEvent(newEventElement);
        }

        function clickRight() {
            currentEventIndex = getNextEventIndex();

            const newEventElement = getClonedEvent();

            eventsContainer.appendChild(newEventElement)

            activeEvent.classList.add("event-displaced-left")
            changeActiveEvent(newEventElement);
        }
    </script>
</body>
</html>
